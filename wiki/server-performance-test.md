### 성능 테스트 정리

**1. CPU Usage 상태를 확인**
- top : 시스템 사용량을 실시간으로 표시해주는 명령어
  - 옵션
    - -a : 프로세스를 메모리사용률로 정렬하여 표시 (기본은 CPU사용률 정렬)
    - -d {초} : 화면갱신시간을 입력받은 초단위로 처리 (기본은 3초마다 갱신)
    - -i : idle 프로세스와 좀비프로세스를 표시하지 않도록 처리
    - -u {사용자} : 입력된 사용자의 프로세스만 표시
    - -c : 명령어 대신 명령어 라인을 보여줌

> 어플리케이션의 CPU Usage가 높지않은데 성능이 좋지 않다면 코드상에 I/O 병목이 있을 수 있다. 비동기 프레임워크로 개발된 어플리케이션의 경우 동기로 작성된 코드가 있는지 확인해 봐야한다.

**2. I/O, Network Bound 상태를 확인**

**3. Socket TIME WAIT 수를 확인**
- netstat : 네트워크 상태 및 프로토콜 통계를 표시하는 화면을 생성하는 명령어
  - 기본 구문 : netstat [-m] [-n] [-s] [-i | -r] [-f address-family]
  - 옵션
    - -s : UDP, TCP, SCTP, ICMP 및 IP 프로토콜에 대한 프로토콜 통계를 표시
    - -P {transport-protocol} : 시스템에서 특정 전송 프로토콜의 상태를 표시 (transport-protocol 변수의 값은 tcp, sctp 또는 udp)
    - -i : 네트워크 인터페이스의 상태를 표시
    - -a : 로컬 호스트에 있는 소켓의 상태를 확인
    - -f : 특정 주소 그룹의 패킷 전송과 관련된 통계를 표시
    - -t : TCP 프로토콜만 표시

TIP : **netstat -nat | awk '{print $6}' | sort | uniq -c | sort -n** : 소켓의 상태를 기준으로 그룹핑되어 각 상태의 소켓 수를 화면에 표시.

> Socket의 TIME_WAIT상태가 너무 많아진다면 OS의 socket reuse 설정이 꺼져있는지 확인해봐야한다.
